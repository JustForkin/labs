'use strict';var LTH={},isMain;LTH.rubriques="physics-2d physics-3d games shaders experiments others".split(" ");LTH.option={"physics-2d":[[],[],[]],"physics-3d":[[],[]],games:[["sea3d","dat.gui"],["sea3d","dat.gui","rot","tween"]],shaders:[["sea3d","dat.gui"],["sea3d","dat.gui"],["sea3d","dat.gui"],["sea3d","dat.gui"],["sea3d","dat.gui"]],experiments:[["serious"]],others:[["dat.gui"]]};LTH.cRubrique="";LTH.cFile=0;var esprima=esprima||{},CodeMirror=CodeMirror||{},GRAD=GRAD||{},history,main;
window.onload=init;function init(){main=new LTH.Main}function showHideMenu(a){var b=main.menu.content.className;a=a.clientX;170<a&&"menu exemple In"===b&&(main.menu.content.className="menu exemple Out",main.menu.logo.className="logo lmin",main.menu.title.innerHTML="");60>a&&("menu exemple"===b||"menu exemple Out"===b)&&(main.menu.content.className="menu exemple In",main.menu.logo.className="logo lmax",main.menu.title.innerHTML=LTH.cRubrique.toUpperCase())}
LTH.Main=function(){this.menuSize=60;this.doc=document;this.doc.body.className="night";this.doc.body.ondragover=function(a){return!1};this.doc.body.onmousemove=showHideMenu;this.day=!1;this.mode="basic";this.startDemo=0;this.numLesson=4;this.items=[];this.showCode=!1;this.viewType="vertical";this.scriptText=14;this.currentLesson=-1;this.isFirst=this.codeLoaded=!1;this.previewMain=this.previewDoc=this.preview=this.editorFragment=this.editorVertex=this.editor=this.menu=null;this.happ=this.supports_history_api();
this.init()};
LTH.Main.prototype={constructor:LTH.Main,init:function(){this.shader=new LTH.ShaderToy(this);this.fileSystem=new LTH.FileSystem(this);this.editor=new LTH.CodeEditor(this);this.menu=new LTH.Menu(this);var a=this;window.onresize=function(b){a.resize(b)}},switchMode:function(a){a!==this.mode&&("shader"===this.mode&&this.clearShader(),"shader"===a&&this.initShader(),this.mode=a)},clearShader:function(){this.shader.clear();this.editorVertex.deleteAll();this.editorFragment.deleteAll()},initShader:function(){this.editorVertex=new LTH.CodeEditor(this,
"vertex");this.editorFragment=new LTH.CodeEditor(this,"fragment")},supports_history_api:function(){return!(!window.history||!history.pushState)},autoTime:function(){var a=(new Date).getHours();this.day=19<a||6>a?!1:!0},resize:function(){var a=window.innerWidth,b=window.innerHeight,c=this.menuSize,d=Math.floor(0.5*(a-c)),e=Math.floor(0.5*(b-0)),f=Math.floor((a-c)/3),g=Math.floor(b/3);if(this.showCode){this.editor.content.style.display="block";"shader"===this.mode&&(this.editorVertex.content.style.display=
"block",this.editorFragment.content.style.display="block");switch(this.viewType){case "vertical":"shader"!==this.mode?this.setStyle(this.editor.content,c,0,d,b):(this.setStyle(this.editor.content,c,0,d,g),this.setStyle(this.editorVertex.content,c,g,d,g),this.setStyle(this.editorFragment.content,c,g+g,d,g));null!==this.preview&&this.setStyle(this.preview,c+d,0,d,b);break;case "horizon":"shader"!==this.mode?this.setStyle(this.editor.content,c,0,a-c,e):(this.setStyle(this.editor.content,c,0,f,e),this.setStyle(this.editorVertex.content,
c+f,0,f,e),this.setStyle(this.editorFragment.content,c+f+f,0,f,e)),null!==this.preview&&this.setStyle(this.preview,c,e,a-c,e)}this.editor.refresh();"shader"===this.mode&&(this.editorVertex.refresh(),this.editorFragment.refresh())}else this.editor.content.style.display="none","shader"===this.mode&&(this.editorVertex.content.style.display="none",this.editorFragment.content.style.display="none"),null!==this.preview&&this.setStyle(this.preview,c,0,a-c,b)},setTextSize:function(){this.editor.changeFontSize(this.scriptText);
"shader"===this.mode&&(this.editorVertex.changeFontSize(this.scriptText),this.editorFragment.changeFontSize(this.scriptText))},setStyle:function(a,b,c,d,e){a.style.left=b+"px";a.style.top=c+"px";a.style.width=d+"px";a.style.height=0==e?"100%":e+"px"},switchStyle:function(){this.day?(this.editor.changeTheme(0),"shader"===this.mode&&(this.editorVertex.changeTheme(0),this.editorFragment.changeTheme(0))):(this.editor.changeTheme(1),"shader"===this.mode&&(this.editorVertex.changeTheme(1),this.editorFragment.changeTheme(1)));
this.codeLoaded&&this.previewTheme()},previewTheme:function(){this.previewDoc.body.className=this.day?"day":"night";this.previewMain&&(this.day?this.previewMain.v.colorBack(13815496):this.previewMain.v.colorBack(2435374))},previewClearFocus:function(){for(var a=this.previewDoc.getElementsByTagName("*"),b=0,c;c=a[b++];)c.id&&c.blur()},clearPreview:function(){null!==this.preview&&(this.doc.body.removeChild(this.preview),this.preview=null,this.codeLoaded=!1)},initPreview:function(){this.preview=this.doc.createElement("iframe");
this.doc.body.appendChild(this.preview);this.preview.className="preview";this.preview.style.cssText="position:absolute;  border:none; pointer-events:auto; background:none; z-index:0; ";var a="<script src='./src/Vue3d.js'>\x3c/script>",b="<script src='./js/libs/three.js'>\x3c/script>";isMain&&(a="<script src='./build/v3d.min.js'>\x3c/script>",b="<script src='./js/libs/three.min.js'>\x3c/script>");for(var c="",d=LTH.option[LTH.cRubrique][LTH.cFile],e=d.length;e--;)c+="<script src='./js/libs/"+d[e]+
".min.js'>\x3c/script>";a=["<!DOCTYPE html>\n<html lang='en'>\n<head>\n<title>prev</title>\n<meta charset='utf-8'>\n<link rel='stylesheet' href='./css/consolas.css'>\n<link rel='stylesheet' href='./css/basic.css'>",b,"<script src='./js/libs/three.post.js'>\x3c/script>",c,a,"<script id='shader'>\x3c/script>\n</head><body>\n<script> var main = null; var canvas = document.createElement('canvas'); document.body.appendChild( canvas );\x3c/script>\n</body></html>"].join("\n");this.previewDoc=this.preview.contentDocument||
this.preview.contentWindow.document;this.previewDoc.open();this.previewDoc.write(a);this.previewDoc.close(this.preview);console.log(this.preview.contentDocument)},update:function(a){if(""!==a){this.clearPreview();this.initPreview();var b=this;this.preview.onload=function(c){console.log("loaded");b.previewMain=b.preview.contentWindow;"shader"===b.mode&&(b.previewMain.main=b);c=b.previewDoc.getElementsByTagName("head")[0];var d=b.previewDoc.createElement("script");d.setAttribute("id","base");d.type=
"text/javascript";d.charset="utf-8";d.text=a;c.appendChild(d);b.codeLoaded=!0;b.previewTheme();b.resize();b.isFirst?b.isFirst=!1:b.showModif()}}},checkCurrent:function(){for(var a=0;a<this.numLesson;a++)this.items[a].style.background=this.items[a].name==this.currentLesson?"#881288":"#121212"},loadFile:function(a){this.isFirst=!0;this.fileSystem.load(a)},openFile:function(a){this.fileSystem.open(a)},createLink:function(a,b,c){this.menu.addIconLink(a,b,c)},showModif:function(){this.menu.modified()},
callSave:function(){this.fileSystem.save()}};LTH.ShaderToy=function(a){this.main=a;this.retour=document.createElement("div");this.retour.innerHTML=".join('&#92;n')";this.shaderName="";this.shaderBase=null;this.uniformValues={};this.uniformColors={};this.isShaderReady=!1};
LTH.ShaderToy.prototype={constructor:LTH.ShaderToy,open:function(a){this.main.fileSystem.load("./shaders/"+a+".js",!0)},clear:function(){this.shaderName="";this.shaderBase=null;this.uniformColors={};this.uniformValues={};this.isShaderReady=!1},deCompacte:function(a,b){if("shader"===this.main.mode){this.uniformColors={};this.uniformValues={};var c=this.main.previewDoc.body,d=this.main.previewDoc.createElement("script");d.setAttribute("id","shader");d.type="text/javascript";d.charset="utf-8";d.text=
b;c.appendChild(d);try{this.shaderBase=this.main.previewMain.V[a],this.shaderName=a}catch(e){}finally{this.getUniformValue(this.shaderBase.uniforms),this.main.editorVertex.set(this.shaderBase.vs,!0),this.main.editorFragment.set(this.shaderBase.fs,!0),this.main.preview.contentWindow.shader.apply(this.shaderBase),this.isShaderReady=!0}}},getUniformValue:function(a){this.uniformValues={};for(var b in a){var c=a[b].type,d=JSON.stringify(a[b].value);"c"===c?this.uniformColors[b]=d:this.uniformValues[b]=
d;"c"===c&&this.main.previewMain.v.gui.color(b,a[b].value);"i"===c&&this.main.previewMain.v.gui.int(b,a[b].value);"f"===c&&this.main.previewMain.v.gui.float(b,a[b].value);"t"===c&&this.main.previewMain.v.gui.textures(b)}},compacte:function(){if("shader"===this.main.mode&&this.isShaderReady){this.uniform="";var a=this.getShader(this.main.editorVertex.editor),b=this.getShader(this.main.editorFragment.editor),a=["V."+this.shaderName+"={","uniforms:{",this.uniform,"},","fs: ["+b+"]"+this.retour.innerHTML+
",","vs: ["+a+"]"+this.retour.innerHTML,"}"].join("\n"),b=this.main.previewDoc.body,c=this.main.previewDoc.createElement("script");c.setAttribute("id","shader");c.type="text/javascript";c.charset="utf-8";c.text=a;b.appendChild(c);this.main.preview.contentWindow.shader.dispose();this.main.preview.contentWindow.shader.apply(this.main.previewMain.V[this.shaderName])}},pushUniform:function(a){var b=a.split(String.fromCharCode(32));a=b[1];var b=b[2].replace(";",""),c=this.isAlphanumeric(b),d=!1,e=null,
f=null,g;for(g in this.uniformValues)g===b&&(f=JSON.parse(this.uniformValues[g]));for(g in this.uniformColors)g===b&&(f=JSON.parse(this.uniformColors[g]),d=!0);g="";switch(a){case "sampler2D":case "samplerCube":g="t";break;case "vec2":g="v2";null!==f&&(e="new THREE.Vector2("+f.x+","+f.y+")");break;case "vec3":d?(g="c",null!==f&&(e="new THREE.Color("+f.r+","+f.g+","+f.b+")")):(g="v3",null!==f&&(e="new THREE.Vector3("+f.x+","+f.y+","+f.z+")"));break;case "vec4":g="v4";null!==f&&(e="new THREE.Vector3("+
f.x+","+f.y+","+f.z+","+f.w+")");break;case "int":g="i";null!==f&&(e=f);break;case "float":g="f";null!==f&&(e=f);break;case "mat4":g="m4"}c||(g+="v");this.uniform+=b+" : { type: '"+g+"', value: "+e+" },\n"},isAlphanumeric:function(a){return/^[0-9a-zA-Z]+$/.test(a)},getShader:function(a){for(var b="",c=a.lineCount(),d,e=0;e<c;e++)d=a.getLine(e),void 0!==d&&("uniform"===d.substring(0,7)&&this.pushUniform(d),b=0==e?b+("\n'"+d+"',\n"):e==c-1?b+("'"+d+"'\n"):b+("'"+d+"',\n"));return b}};
LTH.Menu=function(a){this.main=a;this.doc=document;this.content=this.doc.createElement("div");this.content.className="menu";this.doc.body.appendChild(this.content);this.rubriques=[];this.icons=[];this.files=[];this.buttons=[];this.inModif=this.currentFile=-1;this.colorSelect="#d2cec8";this.colorModif="#FF0073";this.colorOver="rgba(255,255,255,0.3)";this.logo=this.zone=this.currentLink=null;this.isHome=this.isMenu=!1;this.leftMenu=this.home=null;this.initLogo();this.initHome();var b=this;this.main.happ&&
window.addEventListener("popstate",function(a){b.isHome?history.back():b.initHome(a)})};
LTH.Menu.prototype={constructor:LTH.Menu,initLogo:function(){this.logo=this.doc.createElement("div");this.logo.className="logo";this.content.appendChild(this.logo);this.logo.innerHTML=LTH.Logos("d2cec8");this.title=this.doc.createElement("div");this.title.innerHTML="LOTH LABS";this.title.className="title";this.content.appendChild(this.title);var a=this;this.logo.onmousedown=function(b){a.initHome(b)};this.logo.onmouseover=function(b){a.isHome||(a.title.innerHTML="BACK HOME")};this.logo.onmouseout=
function(b){a.isHome||(a.title.innerHTML=LTH.cRubrique.toUpperCase())}},initHome:function(){this.content.className="menu home";this.main.shader.clear();this.isMenu&&this.resetMenu();if(!this.isHome){LTH.cRubrique="";LTH.cFile=0;this.title.innerHTML="LOTH LABS";this.home=this.doc.createElement("div");this.home.style.cssText="position:absolute; left:10%; top:160px; width:80%; height:400px; text-align:center;";this.content.appendChild(this.home);for(var a=this,b,c=0;c<LTH.rubriques.length;c++)b=this.doc.createElement("div"),
b.className="rub",b.name=LTH.rubriques[c],b.innerHTML=LTH.rubriques[c].toUpperCase(),b.onclick=function(b){a.resetHome(b)},b.onmouseover=function(a){a.target.className="rub rubover"},b.onmouseout=function(a){a.target.className="rub"},this.home.appendChild(b);this.isHome=!0}},resetHome:function(a){LTH.cRubrique=a.target.name;this.clearDiv(this.home);this.content.removeChild(this.home);this.isHome=!1;this.initMenu();this.main.happ&&history.pushState(null,null,"index.html");a.preventDefault()},resetMenu:function(){this.main.editor.clear();
"shader"===this.main.mode&&(this.main.editorVertex.clear(),this.main.editorFragment.clear());this.main.clearPreview();this.clearDiv(this.zone);this.clearDiv(this.leftMenu);this.content.removeChild(this.leftMenu);this.content.removeChild(this.zone);this.icons=[];this.files=[];this.buttons=[];this.isMenu=!1},initMenu:function(){this.content.className="menu exemple";this.logo.className="logo lmin";var a="basic";"shaders"===LTH.cRubrique&&(a="shader");this.main.switchMode(a);this.main.resize();this.title.innerHTML=
"";this.initButton();this.initZone();for(var b=0;b<LTH.option[LTH.cRubrique].length;b++)a="demo_"+b+".js",this.pushFile(a);this.currentFile=this.main.startDemo||0;this.main.loadFile("demos/"+LTH.cRubrique+"/"+this.files[this.currentFile]);this.resetIcon();this.isMenu=!0},clearDiv:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},initZone:function(){this.zone=this.doc.createElement("div");this.zone.className="zone";this.content.appendChild(this.zone);var a=this;this.zone.ondragover=function(b){a.zoneDragOver(b)};
this.zone.ondragend=function(b){a.zoneDragEnd(b)};this.zone.ondrop=function(b){a.zoneDrop(b)}},initButton:function(){this.leftMenu=this.doc.createElement("div");this.leftMenu.className="bottomLeftMenu";this.content.appendChild(this.leftMenu);for(var a,b=0;5>b;b++)a=this.doc.createElement("div"),a.className="b",1<b&&(a.style.display="none"),this.leftMenu.appendChild(a),this.buttons[b]=a;this.buttons[0].innerHTML="N";this.buttons[1].innerHTML="C";this.buttons[2].innerHTML="V";this.buttons[3].innerHTML=
"+";this.buttons[4].innerHTML="-";var c=this;this.buttons[0].onclick=function(){c.dayNight()};this.buttons[1].onclick=function(){c.showCode()};this.buttons[2].onclick=function(){c.verticlaHorizon()};this.buttons[3].onclick=function(){c.textPlus()};this.buttons[4].onclick=function(){c.textMoin()}},showCode:function(){this.main.showCode?(this.main.showCode=!1,this.buttons[1].style.textDecoration="none",this.buttons[2].style.display="none",this.buttons[3].style.display="none",this.buttons[4].style.display=
"none"):(this.main.showCode=!0,this.buttons[1].style.textDecoration="line-through",this.buttons[2].style.display="inline-block",this.buttons[3].style.display="inline-block",this.buttons[4].style.display="inline-block");this.main.resize()},dayNight:function(){this.main.day?(this.isNight(),this.buttons[0].innerHTML="N"):(this.isDay(),this.buttons[0].innerHTML="D");this.resetIcon(!0);this.main.switchStyle()},verticlaHorizon:function(){"vertical"==this.main.viewType?(this.main.viewType="horizon",this.buttons[2].innerHTML=
"H"):(this.main.viewType="vertical",this.buttons[2].innerHTML="V");this.main.resize()},textPlus:function(){this.main.scriptText++;this.main.setTextSize()},textMoin:function(){this.main.scriptText--;this.main.setTextSize()},isDay:function(){this.logo.innerHTML=LTH.Logos("25292e");this.main.day=!0;this.doc.body.className="day";this.colorSelect="#25292e";this.colorOver="rgba(0,0,0,0.3)"},isNight:function(){this.logo.innerHTML=LTH.Logos("d2cec8");this.main.day=!1;this.doc.body.className="night";this.colorSelect=
"#d2cec8";this.colorOver="rgba(255,255,255,0.3)"},zoneDragOver:function(){this.zone.classList.add("hover");return!1},zoneDragEnd:function(){this.zone.classList.remove("hover");return!1},zoneDrop:function(a){this.zone.classList.remove("hover");a.preventDefault();var b;if(a.dataTransfer.items)for(b=a.dataTransfer.items.length;b--;)a.dataTransfer.items[b].webkitGetAsEntry().isFile&&this.addFile(a.dataTransfer.items[b].getAsFile());else for(b=a.dataTransfer.files.length;b--;)this.addFile(a.dataTransfer.files[b])},
addFile:function(a){var b=this,c=new FileReader;c.onload=function(c){c=a.name;c.substr(c.lastIndexOf(".")+1,c.length);b.pushFile(c)};c.readAsDataURL(a)},pushFile:function(a){for(var b=this,c=this.files.length;c--;)if(a==this.files[c])return;var c=this.icons.length,d=document.createElement("div");d.className="ic";var e=document.createElement("div");e.style.cssText="position:relative; left:10px; top:5px; width:18px; height:18px; pointer-events:none; background-color: none; border:2px solid rgba(0,0,0,0);  border-radius:20px;";
var f=document.createElement("div");f.style.cssText="position:relative; left:30px; top:-12px; width:calc(100% - 40px); height:20px; pointer-events:none; text-align:right;";var g=document.createElement("div");g.style.cssText="position:relative; left:15px; top:-28px; width:8px; height:8px; pointer-events:none; background-color: "+this.colorSelect+";  border-radius:20px;";f.innerHTML=a.substr(0,a.lastIndexOf("."));d.appendChild(e);d.appendChild(f);d.appendChild(g);this.zone.appendChild(d);d.name=c;d.onclick=
function(a){b.openFile(a)};d.ondblclick=function(a){b.openFile(a)};d.onmouseover=function(a){b.iconOver(a)};d.onmouseout=function(a){b.unselected(a)};d.onmouseup=function(a){b.unselected(a)};d.ondragstart=function(a){b.dragstart(a)};d.ondragend=function(a){b.dragend(a)};this.icons[c]=d;this.files[c]=a},iconOver:function(a){a.target.className="ic icover";a.preventDefault();a=a.target.name;a!==this.currentFile&&(this.icons[a].childNodes[0].style.border="2px solid "+this.colorOver)},unselected:function(a){a.target.className=
"ic icout";a.preventDefault();a=a.target.name;a!==this.currentFile&&(this.icons[a].childNodes[0].style.border="2px solid rgba(0,0,0,0)")},addIconLink:function(a,b,c){window.URL=window.webkitURL||window.URL;this.currentLink&&(window.URL.revokeObjectURL(this.currentLink.href),this.currentLink=null);this.currentLink=document.createElement("a");this.currentLink.style.cssText="position:absolute; top:6px; right:65px; width:120px; height:20px; text-align:center;";this.currentLink.download=b;this.currentLink.href=
window.URL.createObjectURL(a);this.currentLink.dataset.downloadurl=[c,this.currentLink.download,this.currentLink.href].join(":")},dragstart:function(a){a.target.classList.contains("dragout")&&null!==this.currentLink&&a.dataTransfer.setData("DownloadURL",this.currentLink.dataset.downloadurl)},dragend:function(a){this.resetModified()},openFile:function(a){a.preventDefault();a=a.target.name;this.currentFile!==a&&(LTH.cFile=a||0,this.resetModified(),this.currentFile=a,this.main.loadFile("demos/"+LTH.cRubrique+
"/"+this.files[a]),this.resetIcon())},resetIcon:function(a){for(var b=this.icons.length,c;b--;)c=this.icons[b].childNodes,c[0].style.border=b==this.currentFile?b==this.inModif?"2px solid "+this.colorModif:"2px solid "+this.colorSelect:"2px solid rgba(0,0,0,0)",a&&(b==this.inModif?(c[1].style.color=this.colorModif,c[2].style.backgroundColor=this.colorModif):(c[1].style.color=this.colorSelect,c[2].style.backgroundColor=this.colorSelect))},modified:function(){this.inModif=this.currentFile;var a=this.icons[this.currentFile].childNodes;
this.icons[this.currentFile].draggable=!0;this.icons[this.currentFile].classList.add("dragout");a[0].style.border="2px solid "+this.colorModif;a[1].style.color=this.colorModif;a[2].style.backgroundColor=this.colorModif;this.main.callSave()},resetModified:function(){this.inModif=-1;for(var a=this.icons.length,b;a--;)this.icons[a].draggable=!1,this.icons[a].classList.remove("dragout"),b=this.icons[a].childNodes,a==this.currentFile&&(b[0].style.border="1px solid "+this.colorSelect),b[1].style.color=
this.colorSelect,b[2].style.backgroundColor=this.colorSelect;this.currentLink&&(window.URL.revokeObjectURL(this.currentLink.href),this.currentLink=null)}};
LTH.CodeEditor=function(a,b){this.type=b||"base";this.main=a;this.doc=document;this.interval=this.editor=null;this.currentName=this.mode="";this.content=this.doc.createElement("div");this.content.className="editor";this.content.id="editor"+this.type;this.doc.body.appendChild(this.content);this.errorLines=[];this.widgets=[];this.isStart=this.isEnd=!1;this.init()};
LTH.CodeEditor.prototype={constructor:LTH.CodeEditor,init:function(){this.editor=CodeMirror(this.content,{lineNumbers:!0,matchBrackets:!0,indentWithTabs:!0,styleActiveLine:!0,theme:"monokai",mode:"text/javascript",tabSize:4,indentUnit:4,highlightSelectionMatches:{showToken:/\w/}});var a=this;if("base"===this.type)this.editor.on("change",function(){a.onChange()});else this.editor.on("change",function(){a.main.shader.compacte()})},onChange:function(){var a=this;this.mode=this.editor.getOption("mode");
if(!this.end){clearTimeout(this.interval);var b=this.editor.getValue();this.validate(b)&&(this.interval=setTimeout(function(){a.main.update(b,!0)},500))}},get:function(){return this.editor.getValue()},set:function(a){this.editor.setValue(a)},changeTheme:function(a){0==a?this.editor.setOption("theme","default"):this.editor.setOption("theme","monokai")},deleteAll:function(){this.clear();this.doc.body.removeChild(this.content);this.content=null},clear:function(){this.isEnd=!0;this.main.showCode=!1;this.content.style.display=
"none";this.editor.setValue("")},refresh:function(){this.editor.refresh()},changeFontSize:function(a){this.editor.getWrapperElement().style["font-size"]=a+"px";this.refresh()},close:function(){this.editor.getInputField().blur()},validate:function(a){var b=this.editor,c=this;return b.operation(function(){for(;0<c.errorLines.length;)b.removeLineClass(c.errorLines.shift(),"background","errorLine");for(var d=0;d<c.widgets.length;d++)b.removeLineWidget(c.widgets[d]);c.widgets.length=0;try{for(var e=esprima.parse(a,
{tolerant:!0}).errors,d=0;d<e.length;d++){var f=e[d],g=document.createElement("div");g.className="esprima-error";g.textContent=f.message.replace(/Line [0-9]+: /,"");var h=f.lineNumber-1;c.errorLines.push(h);b.addLineClass(h,"background","errorLine");var k=b.addLineWidget(h,g);c.widgets.push(k)}}catch(l){g=document.createElement("div"),g.className="esprima-error",g.textContent=l.message.replace(/Line [0-9]+: /,""),h=l.lineNumber-1,c.errorLines.push(h),b.addLineClass(h,"background","errorLine"),k=b.addLineWidget(h,
g),c.widgets.push(k)}return 0===c.errorLines.length})}};LTH.FileSystem=function(a){this.main=a};
LTH.FileSystem.prototype={constructor:LTH.FileSystem,load:function(a,b){a.substring(a.lastIndexOf(".")+1,a.length);var c=a.substring(a.lastIndexOf("/")+1,a.lastIndexOf(".")),d;window.XMLHttpRequest?d=new XMLHttpRequest:window.ActiveXObject&&(d=new ActiveXObject("Microsoft.XMLHTTP"));d.open("GET","./"+a,!0);d.responseType="blob";var e=this;d.onload=function(a){a=new FileReader;a.onload=function(a){e.process(c,a.target.result,b)};a.readAsText(this.response)};d.send()},open:function(a,b){var c=a.name,
d=new FileReader,e=this;d.onload=function(a){e.process(c,a.target.result,b)};d.readAsText(a.file)},save:function(){var a=new Blob([this.main.editor.get()],{type:"application/text/javascript;charset=utf-8"});this.main.createLink(a,this.main.editor.currentName+".js","application/text/javascript;charset=utf-8")},process:function(a,b,c){c?this.main.shader.deCompacte(a,b):(this.main.editor.editor.setValue(b),this.main.editor.currentName=a)}};
LTH.Logos=function(a){return["<svg xmlns='http://www.w3.org/2000/svg' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' preserveAspectRatio='none' x='0px' y='0px' width='128px' height='128px' viewBox='0 0 128 128'><defs><g id='copie_Symbole_1_0_Layer0_0_FILL'>","<path fill='#"+a+"' fill-opacity='0.3' stroke='none' d='M 23 37 L 19 37 Q 19 44.9 13.4 50.4 9.6001953125 54.26875 4.65 55.45 L 6.3 62.05 Q 10.253515625 60.838671875 13.55 57.95 12.75 56.9921875 12.75 55.7 12.75 54.25 13.8 53.2 14.85 52.15 16.3 52.15 17.3998046875 52.15 18.25 52.75 23 46.0076171875 23 37 M 7.05 44.05 Q 10 41.15 10 37 10 32.85 7.05 29.9 4.15 27 0 27 L 0 47 Q 1.2853515625 47 2.45 46.7 5.0482421875 46.086328125 7.05 44.05 M 0 0 L 0 10 Q 11.2 10 19.05 17.85 25.74296875 24.54296875 26.8 33.55 27 35.2291015625 27 37 27 43.170703125 24.55 48.3 27.7384765625 51.3177734375 27.2 54.05 26.15 58.85 23.6 60.65 18.55 64.05 16.25 70.75 13.5755859375 77.8880859375 16.05 83.6 18.7349609375 79.5951171875 20.85 73.95 23.15 67.25 28.2 63.85 30.75 62.05 31.8 57.25 34.75 42.3 31.85 27 31.8 26.85 31.8 26.75 30.75 16 22.25 7.9 13.65 -0.35 0 0 Z'/></g>",
"<path id='Symbole_1_0_Layer0_0_1_STROKES' stroke='#"+a+"' stroke-width='3' stroke-linejoin='round' stroke-linecap='round' fill='none' d='M 0 93.75 Q 13.6 93.3 20.85 73.95 23.15 67.25 28.2 63.85 30.75 62.05 31.8 57.25 34.75 42.3 31.85 27 31.8 26.85 31.8 26.75 30.75 16 22.25 7.9 13.65 -0.35 0 0 M 38.65 29.45 Q 40.7 42.6 38.65 55.65 M 43.8 52.25 Q 44.95 42.55 43.8 32.85 46.95 42.55 43.8 52.25 Z M 33.45 27 Q 36.4 42.2 33.45 57.35'/>","<path id='Symbole_1_0_Layer0_1_1_STROKES' stroke='#"+a+"' stroke-width='3' stroke-linejoin='round' stroke-linecap='round' fill='none' d='M 19.85 53.5 Q 19.85 54.95 18.8 56 17.75 57.05 16.3 57.05 14.85 57.05 13.8 56 12.75 54.95 12.75 53.5 12.75 52.05 13.8 51 14.85 49.95 16.3 49.95 17.75 49.95 18.8 51 19.85 52.05 19.85 53.5 Z'/></defs>",
"<g transform='matrix( 1, 0, 0, 1, 64,63.1) '><g transform='matrix( -1, 0, 0, 1, 0,-46.85) '><g transform='matrix( 1, 0, 0, 1, 0,0) '><use xlink:href='#copie_Symbole_1_0_Layer0_0_FILL'/></g></g>\n<g transform='matrix( 1, 0, 0, 1, 0,-46.85) '><g transform='matrix( 1, 0, 0, 1, 0,0) '><use xlink:href='#copie_Symbole_1_0_Layer0_0_FILL'/></g></g>\n<g transform='matrix( 1, 0, 0, 1, 0,-46.85) '><g transform='matrix( 1, 0, 0, 1, 0,0) '><use xlink:href='#Symbole_1_0_Layer0_0_1_STROKES'/></g>\n<g transform='matrix( 1, 0, 0, 1, 0,2.2) '><use xlink:href='#Symbole_1_0_Layer0_1_1_STROKES'/></g></g>\n<g transform='matrix( -1, 0, 0, 1, 0,-46.85) '><g transform='matrix( 1, 0, 0, 1, 0,0) '><use xlink:href='#Symbole_1_0_Layer0_0_1_STROKES'/></g>\n<g transform='matrix( 1, 0, 0, 1, 0,2.2) '><use xlink:href='#Symbole_1_0_Layer0_1_1_STROKES'/></g></g>\n</g></svg>"].join("\n")};
